
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Github integration &#8212; dbprocessing v0.1.0 manual</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working With Pull Requests" href="pull_requests.html" />
    <link rel="prev" title="Documentation" href="documentation.html" /> 
  </head><body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><h1>dbprocessing</h1></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pull_requests.html" title="Working With Pull Requests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="documentation.html" title="Documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="https://spacepy.github.io/dbprocessing/">homepage</a>|&nbsp;</li>
        <li><a href="../SUPPORT.html">help</a>|&nbsp;</li>
        <li><a href="https://github.com/spacepy/dbprocessing">development</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
        <li><a href="../index.html">docs</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Developer Information</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Github integration</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="github-integration">
<h1>Github integration<a class="headerlink" href="#github-integration" title="Permalink to this headline">¶</a></h1>
<p>There are several files in the repository that serve to manage the interaction
between GitHub and the repository, and other settings in GitHub that are
relevant. Generally administrators manage thes settings, but anybody can
submit a pull request that changes the files managing this interaction.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#documentation" id="id2">Documentation</a></p></li>
<li><p><a class="reference internal" href="#issue-and-pull-request-templates" id="id3">Issue and Pull Request Templates</a></p></li>
<li><p><a class="reference internal" href="#settings" id="id4">Settings</a></p></li>
<li><p><a class="reference internal" href="#website" id="id5">Website</a></p></li>
<li><p><a class="reference internal" href="#circleci" id="id6">CircleCI</a></p></li>
</ul>
</div>
<section id="documentation">
<h2><a class="toc-backref" href="#id2">Documentation</a><a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Several documentation files are also rendered by Github. See
<a class="reference internal" href="documentation.html#documentation-magic-github"><span class="std std-ref">Magic github documentation</span></a>.</p>
</section>
<section id="issue-and-pull-request-templates">
<h2><a class="toc-backref" href="#id3">Issue and Pull Request Templates</a><a class="headerlink" href="#issue-and-pull-request-templates" title="Permalink to this headline">¶</a></h2>
<p>These files are in the <code class="docutils literal notranslate"><span class="pre">.github</span></code> directory of the repository, and documented
<a class="reference external" href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/about-issue-and-pull-request-templates">at GitHub</a>.</p>
</section>
<section id="settings">
<h2><a class="toc-backref" href="#id4">Settings</a><a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-roles-for-an-organization">repository roles</a>.</p>
</section>
<section id="website">
<h2><a class="toc-backref" href="#id5">Website</a><a class="headerlink" href="#website" title="Permalink to this headline">¶</a></h2>
<p>This is stored on a separate branch; <a class="reference external" href="https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site">this page</a> describes
how it is rendered.</p>
</section>
<section id="circleci">
<h2><a class="toc-backref" href="#id6">CircleCI</a><a class="headerlink" href="#circleci" title="Permalink to this headline">¶</a></h2>
<p>Continuous integration is managed through <a class="reference external" href="https://circleci.com/">CircleCI</a>.</p>
<p>Some project settings:</p>
<p>“Only build pull requests” is on; we will not build all branches.</p>
<p>CircleCI refers to a PR that is relative to a fork as a “forked PR”. Because
this the preferred means of submitting a PR, “Build forked pull requests”
is on. (The PR itself must actually be submitted to the dbprocessing
repository).</p>
<p>We require status checks to pass before merging to master; in the GitHub
branch settings, this takes the form of a branch protection rule that requires
the CircleCI <code class="docutils literal notranslate"><span class="pre">main</span></code> workflow to succeed on the PR. <a class="reference external" href="https://web.archive.org/web/20210304061613/https://support.circleci.com/hc/en-us/articles/360004346254-Workflow-status-checks-never-completes-because-of-ci-circleci-Waiting-for-status-to-be-reported">This document</a> appears to state
the top-level circleci check should not be selected, but it may predate
pipelines. The <code class="docutils literal notranslate"><span class="pre">main</span></code> workflow appears to work; if it fails, the checks
can be expanded to identify the failed job (rather than requiring all
individual jobs to succeed, which increases the chance that a status
may not be communicated back to GitHub.)</p>
<p>The GitHub checks are set up as described <a class="reference external" href="https://circleci.com/docs/2.0/enable-checks/">in the CircleCI docs</a>. This involves
enabling GitHub checks on the dbprocessing repository (which
ultimately redirects to a GitHub setting) and then enabling “GitHub
Status Updates” in the CircleCI advanced project settings.</p>
<p>The “webhooks” repository setting on GitHub controls the triggering of
CircleCI; this is set to “Let me select individual events” and we have
just “Pull requests” selected. Otherwise CircleCI will build when a
PR is opened (the “Pull requests” selection) <em>and</em> when it’s merged
(since this manifests as a push to the repository.) This is also
where a hook can be re-delivered to CircleCI (triggering processing
again) if the build never happened on CircleCI (the build can also be
restarted on CircleCI if it has already run.)</p>
<p>For ssh access to the CircleCI build environment, click “Project
Settings” in the dbprocessing project on CircleCI, then “SSH Keys” and
add a key there. (This needs to be the private key, so use one just
for this purpose.)</p>
<p>Users with a CircleCI account should <em>not</em> follow their fork on
CircleCI, as <a class="reference external" href="https://support.circleci.com/hc/en-us/articles/360008097173-Why-aren-t-pull-requests-triggering-jobs-on-my-organization-">this will cause the checks to fail</a>.
(In general, triggering a CircleCI build on a branch before submitting the
PR <a class="reference external" href="https://ideas.circleci.com/cloud-feature-requests/p/trigger-new-build-when-a-pull-request-is-opened">may cause problems</a>.)</p>
<p>We use <a class="reference external" href="https://circleci.com/docs/2.0/private-images/">Docker authentication</a> to avoid <a class="reference external" href="https://www.docker.com/blog/scaling-docker-to-serve-millions-more-developers-network-egress/">rate-limiting</a> on
the pull of the image from DockerHub. This requires a <a class="reference external" href="https://hub.docker.com/">DockerHub</a> account (which has been created); the username and password
are set up as environment variables in CircleCI (Project Settings, Environment
Variables in CircleCI). The variables are referenced in the CircleCI
<code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>. These credentials should not be reused.</p>
<hr class="docutils" />
<p><strong>Release</strong>: 0.1.0 <strong>Doc generation date</strong>: Feb 10, 2022</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Github integration</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#issue-and-pull-request-templates">Issue and Pull Request Templates</a></li>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#website">Website</a></li>
<li><a class="reference internal" href="#circleci">CircleCI</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="documentation.html"
                          title="previous chapter">Documentation</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="pull_requests.html"
                          title="next chapter">Working With Pull Requests</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/developer/github.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pull_requests.html" title="Working With Pull Requests"
             >next</a> |</li>
        <li class="right" >
          <a href="documentation.html" title="Documentation"
             >previous</a> |</li>
        <li><a href="https://spacepy.github.io/dbprocessing/">homepage</a>|&nbsp;</li>
        <li><a href="../SUPPORT.html">help</a>|&nbsp;</li>
        <li><a href="https://github.com/spacepy/dbprocessing">development</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
        <li><a href="../index.html">docs</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >Developer Information</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Github integration</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2021, dbprocessing contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>